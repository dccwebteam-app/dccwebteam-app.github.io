var passwordStrength=0,passwordMatched=!1,passcode="",email_success_shown=!1;function newCodeWaitTime(e){$(e).prop("disabled",!0);var t=15;$(e).text("Please wait for "+t+" seconds");var a=setInterval((function(){t--,$(e).text("Please wait for "+t+" seconds"),t<=0&&($(e).prop("disabled",!1),clearInterval(a),$(e).text("Send new code"))}),1e3)}!function(){setInterval((function(){"undefined"!=typeof CONTENT&&(console.log("herer"),"error_requiredFieldMissing"in CONTENT&&(CONTENT.error_requiredFieldMissing="Please complete all mandatory fields and try again."),"error_passwordEntryMismatch"in CONTENT&&(CONTENT.error_passwordEntryMismatch="Please make sure your passwords match."),"ver_intro_msg"in CONTENT&&(CONTENT.ver_intro_msg="Verify by clicking the Send button"),"ver_fail_retry"in CONTENT&&(CONTENT.ver_fail_retry="Invalid code. Please try again."),"ver_fail_server"in CONTENT&&(CONTENT.ver_fail_server="Trouble verifying your email. Please enter a valid email and try again."),"ver_fail_throttled"in CONTENT&&(CONTENT.ver_fail_throttled="Too many verification requests for this email. Please wait and try again."),"ver_but_edit"in CONTENT&&(CONTENT.ver_but_edit="Change Email"),"error_fieldIncorrect"in CONTENT&&(CONTENT.error_fieldIncorrect="Invalid entries in one or more fields. Please review and try again."),"alert_title"in CONTENT&&(CONTENT.alert_title="Invalid entries in one or more fields. Please review and try again."),"alert_message"in CONTENT&&(CONTENT.alert_message="Too many incorrect attempts. Please try again later."),"ver_fail_no_retry"in CONTENT&&(CONTENT.ver_fail_no_retry="Invalid code. Please try again."),"ver_fail_code_expired"in CONTENT&&(CONTENT.ver_fail_code_expired="The code has expired. Please request a new one."),"ver_info_msg"in CONTENT&&(CONTENT.ver_info_msg="Check your inbox for the verification code and enter it below."),"button_continue"in CONTENT&&(CONTENT.button_continue="Get Started"),"ver_success_msg"in CONTENT&&(CONTENT.ver_success_msg="Email verified. You#39;re all set to continue."))}),2e3);var e=document.querySelectorAll(".error");if(e.length>0&&e.forEach((function(e){e.removeAttribute("aria-label")})),document.querySelectorAll(".divider").forEach((function(e){e.querySelectorAll("h2").forEach((function(e){e.parentNode.removeChild(e)}))})),window.innerWidth>=768){var t=document.getElementById("forgotPassword");if(t&&(forgotPasswordLink=t.href,"undefined"!=typeof forgotPasswordLink)){t.parentNode.removeChild(t);var a='<a id="forgotPassword" href="'+forgotPasswordLink+'">Forgot your password?</a>';document.getElementById("rememberMe").parentNode.innerHTML+=a}}var i=document.getElementById("createAccount");if(null!==i&&(createAccountLink=i.href,"undefined"!=typeof createAccountLink)){var r='<a id="createAccount" href="'+createAccountLink+'" class="action-button gainsboro-action-button">Sign up now</a>';document.querySelectorAll(".create").forEach((function(e){e.innerHTML=r}))}var n=document.getElementById("signInName");n&&(n.placeholder="user@example.com");var c=document.getElementById("password");c&&(c.placeholder="Enter your password");var s=document.getElementById("emailAddress");s&&(s.placeholder="user@example.com");var l=document.getElementsByClassName("sendCode")[0];l&&(l.className="action-button green-action-button");var o=document.getElementsByClassName("verifyCode")[0];o&&(o.className="action-button green-action-button");var d=document.getElementsByClassName("sendNewCode")[0];d&&(d.className="action-button haze-action-button");var m=document.getElementsByClassName("changeClaims")[0];m&&(m.className="action-button haze-action-button");var v=(new Date).getFullYear(),u=document.getElementById("currentYear");u&&(u.textContent=v);var f=document.createElement("span");f.className="hint-tooltip hint--right";var h=document.createElement("i");(h.className="userTip",$(window).width()>=640)?(document.querySelectorAll(".attrEntry").forEach((function(e){var t=e.querySelector("label"),a=e.querySelector("a.helpLink");a&&f.setAttribute("aria-label",a.getAttribute("data-help")),t.appendChild(f.cloneNode(!0))})),document.querySelectorAll(".attrEntry").forEach((function(e){e.querySelector("span").appendChild(h.cloneNode(!0))}))):document.querySelectorAll("a.helpLink").forEach((function(e){var t=e.getAttribute("data-help");if(t){var a=function(e){var t=e.previousElementSibling;for(;t;){if("LABEL"===t.tagName)return t;t=t.previousElementSibling}return null}(e);a&&(a.innerHTML+="<span>Hint: "+t+"</span>")}}));document.querySelectorAll(".helpLink").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault()}))}));var _=document.getElementById("newPassword");if(_){var p=document.createElement("meter");p.min="0",p.max="100",p.value="0",_.insertAdjacentElement("afterend",p)}var g=document.getElementById("reenterPassword");if(g){var C=document.createElement("meter");C.min="0",C.max="100",C.value="0",g.insertAdjacentElement("afterend",C)}document.addEventListener("keyup",(function(e){if(e.target&&"newPassword"==e.target.id){var t=e.target.value,a=/^(?=.*[0-9])/.test(t),i=/^(?=.*[A-Z])/.test(t),r=/password/i.test(t),n=/^(?=.{8,})/.test(t),c=/(.)\1\1/.test(t),s=a+i+n;s+=r,s+=c;var l=document.getElementsByClassName("criteria")[0],o=$(l).find('li[dcc-criteria="one-digit"]');o.length>0&&(a?o.addClass("criteria-matched"):o.removeClass("criteria-matched"));var d=$(l).find('li[dcc-criteria="one-uppercase"]');d.length>0&&(i?d.addClass("criteria-matched"):d.removeClass("criteria-matched"));var m=$(l).find('li[dcc-criteria="password"]');m.length>0&&(r?(m.removeClass("criteria-matched"),s-=1):(m.addClass("criteria-matched"),s+=1));var v=$(l).find('li[dcc-criteria="minimum-length"]');v.length>0&&(n?v.addClass("criteria-matched"):v.removeClass("criteria-matched"));var u=$(l).find('li[dcc-criteria="identical-chars"]');u.length>0&&(c?(u.removeClass("criteria-matched"),s-=1):(u.addClass("criteria-matched"),s+=1));var f=document.getElementsByTagName("meter")[0];f&&f.matches("meter")&&(f.value=20*s)}})),document.addEventListener("keyup",(function(e){if(e.target&&"reenterPassword"==e.target.id){var t=e.target.value,a=/^(?=.*[0-9])/.test(t),i=/^(?=.*[A-Z])/.test(t),r=/password/i.test(t),n=/^(?=.{8,})/.test(t),c=/(.)\1\1/.test(t),s=a+i+n;s+=r,s+=c;var l=document.getElementsByClassName("criteria")[1],o=$(l).find('li[dcc-criteria="one-digit"]');o.length>0&&(a?o.addClass("criteria-matched"):o.removeClass("criteria-matched"));var d=$(l).find('li[dcc-criteria="one-uppercase"]');d.length>0&&(i?d.addClass("criteria-matched"):d.removeClass("criteria-matched"));var m=$(l).find('li[dcc-criteria="password"]');m.length>0&&(r?(m.removeClass("criteria-matched"),s-=1):(m.addClass("criteria-matched"),s+=1));var v=$(l).find('li[dcc-criteria="minimum-length"]');v.length>0&&(n?v.addClass("criteria-matched"):v.removeClass("criteria-matched"));var u=$(l).find('li[dcc-criteria="identical-chars"]');u.length>0&&(c?(u.removeClass("criteria-matched"),s-=1):(u.addClass("criteria-matched"),s+=1));var f=document.getElementsByTagName("meter")[1];f&&f.matches("meter")&&(f.value=20*s)}}));var T=document.getElementById("attributeVerification");if(T)for(var y=T.getElementsByTagName("input"),x=0;x<y.length;x++)y[x].autocomplete="off";var w=document.getElementById("emailVerificationControl_error_message"),E=document.getElementById("emailVerificationControl_success_message");if($("#attributeVerification").length>0){var b=$("#email_info").html(),N=$("#email_success").html(),I=$("#email_fail_retry").html(),S=$("#email_fail_no_retry").html(),B=$("#email_fail_throttled").html(),O=$("#email_fail_code_expired").html(),L=$("#email_fail_server").html(),A=$("#email_incorrect_format").html();setInterval((function(){$("#passwordEntryMismatch").html().length>0&&$("#passwordEntryMismatch").html(),$("#email_ver_wait").length>0&&($(".verificationInfoText").html(""),$(".verificationInfoText").removeClass("dcc-alert dcc-alert-success"),$(".verificationErrorText").html(""),$(".verificationErrorText").removeClass("dcc-alert dcc-alert-danger"),$(".verificationSuccessText").html(""),$(".verificationSuccessText").removeClass("dcc-alert dcc-alert-success")),$("#email_info").length>0&&("none"!=$("#email_info").css("display")?($("#email_info").addClass("dcc-alert dcc-alert-success"),$("#email_info").html("<span>"+b+"</span>"),$(".verificationErrorText").html(""),$(".verificationErrorText").removeClass("dcc-alert dcc-alert-danger"),$(".verificationSuccessText").html(""),$(".verificationSuccessText").removeClass("dcc-alert dcc-alert-success")):($("#email_info").removeClass("dcc-alert dcc-alert-success"),$("#email_info").html(""))),$("#email_success").length>0&&("none"==$("#email_success").css("display")||email_success_shown?($("#email_success").removeClass("dcc-alert dcc-alert-success"),$("#email_success").html("")):($("#email_success").addClass("dcc-alert dcc-alert-success"),$("#email_success").html("<span>"+N+"</span>"),$(".verificationInfoText").html(""),$(".verificationInfoText").removeClass("dcc-alert dcc-alert-success"),$(".verificationErrorText").html(""),$(".verificationErrorText").removeClass("dcc-alert dcc-alert-danger"))),$("#email_fail_retry").length>0&&("none"!=$("#email_fail_retry").css("display")?($("#email_fail_retry").addClass("dcc-alert dcc-alert-danger"),$("#email_fail_retry").html("<span>"+I+"</span>"),$(".verificationInfoText").html(""),$(".verificationInfoText").removeClass("dcc-alert dcc-alert-success"),$(".verificationSuccessText").html(""),$(".verificationSuccessText").removeClass("dcc-alert dcc-alert-success")):($("#email_fail_retry").removeClass("dcc-alert dcc-alert-danger"),$("#email_fail_retry").html(""))),$("#email_fail_no_retry").length>0&&("none"!=$("#email_fail_no_retry").css("display")?($("#email_fail_no_retry").addClass("dcc-alert dcc-alert-danger"),$("#email_fail_no_retry").html("<span>"+S+"</span>"),$(".verificationInfoText").html(""),$(".verificationInfoText").removeClass("dcc-alert dcc-alert-success"),$(".verificationSuccessText").html(""),$(".verificationSuccessText").removeClass("dcc-alert dcc-alert-success")):($("#email_fail_no_retry").removeClass("dcc-alert dcc-alert-danger"),$("#email_fail_no_retry").html(""))),$("#email_fail_throttled").length>0&&("none"!=$("#email_fail_throttled").css("display")?($("#email_fail_throttled").addClass("dcc-alert dcc-alert-danger"),$("#email_fail_throttled").html("<span>"+B+"</span>"),$(".verificationInfoText").html(""),$(".verificationInfoText").removeClass("dcc-alert dcc-alert-success"),$(".verificationSuccessText").html(""),$(".verificationSuccessText").removeClass("dcc-alert dcc-alert-success")):($("#email_fail_throttled").removeClass("dcc-alert dcc-alert-danger"),$("#email_fail_throttled").html(""))),$("#email_fail_code_expired").length>0&&("none"!=$("#email_fail_code_expired").css("display")?($("#email_fail_code_expired").addClass("dcc-alert dcc-alert-danger"),$("#email_fail_code_expired").html("<span>"+O+"</span>"),$(".verificationInfoText").html(""),$(".verificationInfoText").removeClass("dcc-alert dcc-alert-success"),$(".verificationSuccessText").html(""),$(".verificationSuccessText").removeClass("dcc-alert dcc-alert-success")):($("#email_fail_code_expired").removeClass("dcc-alert dcc-alert-danger"),$("#email_fail_code_expired").html(""))),$("#email_fail_server").length>0&&("none"!=$("#email_fail_server").css("display")?($("#email_fail_server").addClass("dcc-alert dcc-alert-danger"),$("#email_fail_server").html("<span>"+L+"</span>"),$(".verificationInfoText").html(""),$(".verificationInfoText").removeClass("dcc-alert dcc-alert-success"),$(".verificationSuccessText").html(""),$(".verificationSuccessText").removeClass("dcc-alert dcc-alert-success")):($("#email_fail_server").removeClass("dcc-alert dcc-alert-danger"),$("#email_fail_server").html(""))),$("#email_incorrect_format").length>0&&("none"!=$("#email_incorrect_format").css("display")?($("#email_incorrect_format").addClass("dcc-alert dcc-alert-danger"),$("#email_incorrect_format").html("<span>"+A+"</span>"),$(".verificationInfoText").html(""),$(".verificationInfoText").removeClass("dcc-alert dcc-alert-success"),$(".verificationSuccessText").html(""),$(".verificationSuccessText").removeClass("dcc-alert dcc-alert-success")):($("#email_incorrect_format").removeClass("dcc-alert dcc-alert-danger"),$("#email_incorrect_format").html(""))),$(".error.pageLevel").each((function(){"none"!=$(this).css("display")&&($(this).text().length>0&&$(this).html("<p>"+$(this).text()+"</p>"),$(".verificationInfoText").html(""),$(".verificationInfoText").removeClass("dcc-alert dcc-alert-success"),$(".verificationSuccessText").html(""),$(".verificationSuccessText").removeClass("dcc-alert dcc-alert-success"),$("#verifying_blurb").html(""),email_success_shown=!0)}))}),100)}setInterval((function(){$("#emailVerificationControl_error_message").length>0&&("none"!=$("#emailVerificationControl_error_message").css("display")?(w.parentElement.classList.add("dcc-alert","dcc-alert-danger"),w.innerHTML="<span>"+w.innerHTML+"</span>"):(w.parentElement.classList.remove("dcc-alert","dcc-alert-danger"),w.innerHTML="")),$("#emailVerificationControl_success_message").length>0&&("none"!=$("#emailVerificationControl_success_message").css("display")?(E.classList.add("dcc-alert","dcc-alert-success"),E.innerHTML="<span>"+E.innerHTML+"</span>"):(E.classList.remove("dcc-alert","dcc-alert-success"),E.innerHTML=""))}),100);var P=document.getElementById("extension_termsOfUseConsentChoice_label");if(P&&(M=P.innerHTML).includes("Terms and Conditions")){var k=M.replace(/(\Terms and Conditions\b)/gi,'<a href="https://www.dunedin.govt.nz/about-this-site/privacy-policy" title="Dunedin City Council Terms and Conditions" target="_blank">$1</span>');P.innerHTML=k}if(document.getElementById("password-criteria")){var V=document.getElementById("newPassword");if(V){var M=document.querySelector("template").content;V.parentNode.insertBefore(document.importNode(M,!0),V)}var q=document.getElementById("reenterPassword");if(q){M=document.querySelector("template").content;q.parentNode.insertBefore(document.importNode(M,!0),q)}$(document).on("click",".dcc-password-hint",(function(){$(this).hasClass("dcc-password-hint-visible")?$(this).removeClass("dcc-password-hint-visible"):($(".dcc-password-hint").removeClass("dcc-password-hint-visible"),$(this).addClass("dcc-password-hint-visible"))}))}function H(e,t=null){var a=document.getElementById(e);a&&null!==t?(a.setAttribute("minlength",8),a.setAttribute("maxlength",50),a.setCustomValidity("Password must be 8 characters long")):a&&$("#"+e).val().length>=8?a.setCustomValidity(""):a&&$("#"+e).val().length<8&&a.setCustomValidity("Password must be 8 characters long")}$("input[type='text'], input[type='password']").each((function(){var e=$(this).attr("id");$(this).wrap("<div class='dcc-w-full "+e+"'></div>")})),$(".newPassword, .reenterPassword").append("<i class='passwordReveal'></i>"),$("#password").parent().append("<i class='passwordRevealLogin'></i>"),$(".passwordReveal").on("click",(function(){var e=$(this).parent().find("input");$(e).length>0&&"password"==$(e).attr("type")?($(e).attr("type","text"),$(this).addClass("revealed")):$(e).length>0&&"text"==$(e).attr("type")&&($(e).attr("type","password"),$(this).removeClass("revealed"))})),$(".passwordRevealLogin").on("click",(function(){var e=$(this).parent().find("input");$(e).length>0&&"password"==$(e).attr("type")?($(e).attr("type","text"),$(this).addClass("revealed")):$(e).length>0&&"text"==$(e).attr("type")&&($(e).attr("type","password"),$(this).removeClass("revealed"))})),$("input[type='password']").each((function(){H($(this).attr("id"),"yes")})),$("input[type='password']").keyup((function(){H($(this).attr("id"))})),$(".sendButton").addClass("green-action-button"),$(".verifyButton").addClass("green-action-button"),$(".editButton").addClass("haze-action-button"),$("#email_ver_but_send").css("margin-left","auto"),$("#email_ver_but_send").css("margin-right","auto"),$("#email_ver_but_send").css("max-width","180px"),$(".buttons.verify").css("width","100%"),$("#emailVerificationControl_but_send_code").css("margin-left","auto"),$("#emailVerificationControl_but_send_code").css("margin-right","auto"),$("#emailVerificationControl_but_send_code").css("max-width","180px"),$("#emailVerificationControl_but_send_code").length>0&&($(".buttons:eq(1)").css("width","100%"),$("#continue").addClass("dcc-hidden"),$("#cancel").addClass("dcc-hidden"),$("#emailVerificationControl_but_change_claims").css("max-width","180px")),setInterval((function(){if("none"!=$("#email_ver_input_label").css("display")&&0===$(".TextBox.VerificationCode").length||0===$("#email_ver_input_label").length&&"none"!=$(".TextBox.VerificationCode").css("display")){var e=' <div class="verification-code-container">\n    <div class="verification-code-box"> <input type="text" maxlength="1" class="verification-code-input" /> </div>\n    <div class="verification-code-box"> <input type="text" maxlength="1" class="verification-code-input" /> </div>\n    <div class="verification-code-box"> <input type="text" maxlength="1" class="verification-code-input" /> </div>\n    <div class="verification-code-box"> <input type="text" maxlength="1" class="verification-code-input" /> </div>\n    <div class="verification-code-box"> <input type="text" maxlength="1" class="verification-code-input" /> </div>\n    <div class="verification-code-box"> <input type="text" maxlength="1" class="verification-code-input" /> </div>\n</div>';if(0===$(".verification-code-container").length&&($("#email_ver_input").length>0?$(e).insertBefore(".buttons.verify"):$("#verificationCode").length>0&&($(".attrEntry .verificationCode").append(e),$("#verificationCode").addClass("dcc-hidden")),$(".verification-code-input").on("input",(function(){console.log($(this).val());var e=$(this);setTimeout((function(){1===e.val().length&&e.closest(".verification-code-box").next().find(".verification-code-input").focus(),0===e.val().length&&e.closest(".verification-code-box").prev().find(".verification-code-input").focus()}),0)})).on("keydown",(function(e){var t=$(this);8==e.keyCode&&setTimeout((function(){0===t.val().length&&t.closest(".verification-code-box").prev().find(".verification-code-input").focus()}))})),$("#email_ver_input").length>0?newCodeWaitTime("#email_ver_but_resend"):$("#verificationCode").length>0&&newCodeWaitTime("#emailVerificationControl_but_send_new_code")),$(".verification-code-container").length>0){var t="";$(".verification-code-input").each((function(){$(this).val().length>0&&(t+=$(this).val(),$("#email_ver_input").length>0?$("#email_ver_input").val(t):$("#verificationCode").length>0&&$("#verificationCode").val(t))}))}}else $(".verification-code-container").remove()}),500),$("#email_ver_input_label").insertBefore(".buttons.verify"),$(".email_ver_input").insertBefore(".buttons.verify"),$(".email_ver_input").addClass("dcc-hidden");$("#email_ver_wait").html('<div class="email_ver_wait"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="message"><path fill="#2F4757" d="M20.34,9.32l-14-7a3,3,0,0,0-4.08,3.9l2.4,5.37h0a1.06,1.06,0,0,1,0,.82l-2.4,5.37A3,3,0,0,0,5,22a3.14,3.14,0,0,0,1.35-.32l14-7a3,3,0,0,0,0-5.36Zm-.89,3.57-14,7a1,1,0,0,1-1.35-1.3l2.39-5.37A2,2,0,0,0,6.57,13h6.89a1,1,0,0,0,0-2H6.57a2,2,0,0,0-.08-.22L4.1,5.41a1,1,0,0,1,1.35-1.3l14,7a1,1,0,0,1,0,1.78Z"></path></svg>\n    <p>Sending Verifcation Code&nbsp;</p></div>'),$(".verificationInfoText").parent().addClass("dcc-w-full"),$("#email_ver_but_edit").css("max-width","150px"),$("#attributeList li:first-child").addClass("dcc-email-verification"),$("#continue").parent().addClass("dcc-hidden"),$("#attributeList li").each((function(){$(this).hasClass("dcc-email-verification")||$(this).addClass("dcc-hidden")})),setInterval((function(){"none"!=$("#email_ver_but_edit").css("display")?($("#attributeList li").each((function(){$(this).hasClass("dcc-hidden")&&$(this).removeClass("dcc-hidden")})),$("#continue").parent().removeClass("dcc-hidden")):($("#continue").parent().addClass("dcc-hidden"),$("#attributeList li").each((function(){if(!$(this).hasClass("dcc-email-verification")){$(this).addClass("dcc-hidden");var e=$(this).find("input");void 0!==e&&$(e).val("")}})),$("#extension_termsOfUseConsentChoice_AgreeToTermsOfUseConsentYes").length>0&&($("meter").val(0),$("#extension_termsOfUseConsentChoice_AgreeToTermsOfUseConsentYes").prop("checked",!1))),$("#simplemodal-overlay").length>0?"Continue"==$("#continue").html()&&($("#continue").html("<div class='submit-btn-loading'></div>"),$("#continue").attr("disabled",!0)):"Continue"!=$("#continue").html()&&($("#continue").html("Continue"),$("#continue").attr("disabled",!1)),$("#verificationCode").length>0&&("none"!=$("#emailVerificationControl_but_change_claims").css("display")?($("#continue").removeClass("dcc-hidden"),$("#cancel").removeClass("dcc-hidden")):($("#continue").addClass("dcc-hidden"),$("#cancel").addClass("dcc-hidden")))}),100),$("#extension_termsOfUseConsentChoice_AgreeToTermsOfUseConsentYes").on("change",(function(){$(this).is(":checked")?$(this).val(!0):$(this).val("")})),$("#email_ver_input_label").addClass("verification-code")}();